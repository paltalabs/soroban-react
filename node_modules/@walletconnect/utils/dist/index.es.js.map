{"version":3,"file":"index.es.js","sources":["../src/caip.ts","../src/cacao.ts","../src/crypto.ts","../src/misc.ts","../src/relay.ts","../src/uri.ts","../src/namespaces.ts","../src/errors.ts","../src/validators.ts","../src/network.ts","../src/memoryStore.ts"],"sourcesContent":["import { SessionTypes, ProposalTypes } from \"@walletconnect/types\";\n\ninterface ChainIdParams {\n  namespace: string;\n  reference: string;\n}\n\ninterface AccountIdParams extends ChainIdParams {\n  address: string;\n}\n\nconst CAIP_DELIMITER = \":\";\n\nexport function parseChainId(chain: string): ChainIdParams {\n  const [namespace, reference] = chain.split(CAIP_DELIMITER);\n  return { namespace, reference };\n}\n\nexport function formatChainId(params: ChainIdParams): string {\n  const { namespace, reference } = params;\n  return [namespace, reference].join(CAIP_DELIMITER);\n}\n\nexport function parseAccountId(account: string): AccountIdParams {\n  const [namespace, reference, address] = account.split(CAIP_DELIMITER);\n  return { namespace, reference, address };\n}\n\nexport function formatAccountId(params: AccountIdParams): string {\n  const { namespace, reference, address } = params;\n  return [namespace, reference, address].join(CAIP_DELIMITER);\n}\n\nexport function getUniqueValues(array: string[], parser: (str: string) => string): string[] {\n  const unique: string[] = [];\n  array.forEach((str) => {\n    const value = parser(str);\n    if (!unique.includes(value)) unique.push(value);\n  });\n  return unique;\n}\n\nexport function getAddressFromAccount(account: string) {\n  const { address } = parseAccountId(account);\n  return address;\n}\n\nexport function getChainFromAccount(account: string) {\n  const { namespace, reference } = parseAccountId(account);\n  const chain = formatChainId({ namespace, reference });\n  return chain;\n}\n\nexport function formatAccountWithChain(address: string, chain: string) {\n  const { namespace, reference } = parseChainId(chain);\n  const account = formatAccountId({ namespace, reference, address });\n  return account;\n}\n\nexport function getAddressesFromAccounts(accounts: string[]) {\n  return getUniqueValues(accounts, getAddressFromAccount);\n}\n\nexport function getChainsFromAccounts(accounts: string[]) {\n  return getUniqueValues(accounts, getChainFromAccount);\n}\n\nexport function getAccountsFromNamespaces(\n  namespaces: SessionTypes.Namespaces,\n  keys: string[] = [],\n): string[] {\n  const accounts: string[] = [];\n  Object.keys(namespaces).forEach((key) => {\n    if (keys.length && !keys.includes(key)) return;\n    const ns = namespaces[key];\n    accounts.push(...ns.accounts);\n  });\n  return accounts;\n}\n\nexport function getChainsFromNamespaces(\n  namespaces: SessionTypes.Namespaces,\n  keys: string[] = [],\n): string[] {\n  const chains: string[] = [];\n  Object.keys(namespaces).forEach((key) => {\n    if (keys.length && !keys.includes(key)) return;\n    const ns = namespaces[key];\n    chains.push(...getChainsFromAccounts(ns.accounts));\n  });\n  return chains;\n}\n\nexport function getChainsFromRequiredNamespaces(\n  requiredNamespaces: ProposalTypes.RequiredNamespaces,\n  keys: string[] = [],\n): string[] {\n  const chains: string[] = [];\n  Object.keys(requiredNamespaces).forEach((key) => {\n    if (keys.length && !keys.includes(key)) return;\n    const ns = requiredNamespaces[key];\n    chains.push(...getChainsFromNamespace(key, ns));\n  });\n  return chains;\n}\n\nexport function getChainsFromNamespace(\n  namespace: string,\n  namespaceProps: ProposalTypes.BaseRequiredNamespace,\n) {\n  // check if chainId is provided in the key as `eip155:1` or in the namespace as chains[]\n  return namespace.includes(\":\") ? [namespace] : namespaceProps.chains || [];\n}\n","export interface CacaoPayload {\n  iss: string;\n  domain: string;\n  aud: string;\n  version: string;\n  nonce: string;\n  iat: string;\n  nbf?: string;\n  exp?: string;\n  statement?: string;\n  requestId?: string;\n  resources?: string[];\n}\n\nexport interface CacaoHeader {\n  t: \"eip4361\";\n}\n\nexport interface CacaoSignature {\n  t: \"eip191\" | \"eip1271\";\n  s: string;\n  m?: string;\n}\n\nexport interface Cacao {\n  h: CacaoHeader;\n  p: CacaoPayload;\n  s: CacaoSignature;\n}\n\nexport const getDidAddressSegments = (iss: string) => {\n  return iss?.split(\":\");\n};\n\nexport const getDidChainId = (iss: string) => {\n  const segments = iss && getDidAddressSegments(iss);\n  if (segments) {\n    return segments[3];\n  }\n  return undefined;\n};\n\nexport const getNamespacedDidChainId = (iss: string) => {\n  const segments = iss && getDidAddressSegments(iss);\n  if (segments) {\n    return segments[2] + \":\" + segments[3];\n  }\n  return undefined;\n};\n\nexport const getDidAddress = (iss: string) => {\n  const segments = iss && getDidAddressSegments(iss);\n  if (segments) {\n    return segments.pop();\n  }\n  return undefined;\n};\n\nexport const formatMessage = (cacao: CacaoPayload, iss: string) => {\n  const header = `${cacao.domain} wants you to sign in with your Ethereum account:`;\n  const walletAddress = getDidAddress(iss);\n  const statement = cacao.statement;\n  const uri = `URI: ${cacao.aud}`;\n  const version = `Version: ${cacao.version}`;\n  const chainId = `Chain ID: ${getDidChainId(iss)}`;\n  const nonce = `Nonce: ${cacao.nonce}`;\n  const issuedAt = `Issued At: ${cacao.iat}`;\n  const resources =\n    cacao.resources && cacao.resources.length > 0\n      ? `Resources:\\n${cacao.resources.map((resource) => `- ${resource}`).join(\"\\n\")}`\n      : undefined;\n\n  const message = [\n    header,\n    walletAddress,\n    ``,\n    statement,\n    ``,\n    uri,\n    version,\n    chainId,\n    nonce,\n    issuedAt,\n    resources,\n  ]\n    .filter((val) => val !== undefined && val !== null) // remove unnecessary empty lines\n    .join(\"\\n\");\n\n  return message;\n};\n","import { ChaCha20Poly1305 } from \"@stablelib/chacha20poly1305\";\nimport { HKDF } from \"@stablelib/hkdf\";\nimport { randomBytes } from \"@stablelib/random\";\nimport { hash, SHA256 } from \"@stablelib/sha256\";\nimport * as x25519 from \"@stablelib/x25519\";\nimport { CryptoTypes } from \"@walletconnect/types\";\nimport { concat, fromString, toString } from \"uint8arrays\";\n\nexport const BASE10 = \"base10\";\nexport const BASE16 = \"base16\";\nexport const BASE64 = \"base64pad\";\nexport const UTF8 = \"utf8\";\n\nexport const TYPE_0 = 0;\nexport const TYPE_1 = 1;\n\nconst ZERO_INDEX = 0;\nconst TYPE_LENGTH = 1;\nconst IV_LENGTH = 12;\nconst KEY_LENGTH = 32;\n\nexport function generateKeyPair(): CryptoTypes.KeyPair {\n  const keyPair = x25519.generateKeyPair();\n  return {\n    privateKey: toString(keyPair.secretKey, BASE16),\n    publicKey: toString(keyPair.publicKey, BASE16),\n  };\n}\n\nexport function generateRandomBytes32(): string {\n  const random = randomBytes(KEY_LENGTH);\n  return toString(random, BASE16);\n}\n\nexport function deriveSymKey(privateKeyA: string, publicKeyB: string): string {\n  const sharedKey = x25519.sharedKey(\n    fromString(privateKeyA, BASE16),\n    fromString(publicKeyB, BASE16),\n    true,\n  );\n  const hkdf = new HKDF(SHA256, sharedKey);\n  const symKey = hkdf.expand(KEY_LENGTH);\n  return toString(symKey, BASE16);\n}\n\nexport function hashKey(key: string): string {\n  const result = hash(fromString(key, BASE16));\n  return toString(result, BASE16);\n}\n\nexport function hashMessage(message: string): string {\n  const result = hash(fromString(message, UTF8));\n  return toString(result, BASE16);\n}\n\nexport function encodeTypeByte(type: number): Uint8Array {\n  return fromString(`${type}`, BASE10);\n}\n\nexport function decodeTypeByte(byte: Uint8Array): number {\n  return Number(toString(byte, BASE10));\n}\n\nexport function encrypt(params: CryptoTypes.EncryptParams): string {\n  const type = encodeTypeByte(typeof params.type !== \"undefined\" ? params.type : TYPE_0);\n  if (decodeTypeByte(type) === TYPE_1 && typeof params.senderPublicKey === \"undefined\") {\n    throw new Error(\"Missing sender public key for type 1 envelope\");\n  }\n  const senderPublicKey =\n    typeof params.senderPublicKey !== \"undefined\"\n      ? fromString(params.senderPublicKey, BASE16)\n      : undefined;\n\n  const iv =\n    typeof params.iv !== \"undefined\" ? fromString(params.iv, BASE16) : randomBytes(IV_LENGTH);\n  const box = new ChaCha20Poly1305(fromString(params.symKey, BASE16));\n  const sealed = box.seal(iv, fromString(params.message, UTF8));\n  return serialize({ type, sealed, iv, senderPublicKey });\n}\n\nexport function decrypt(params: CryptoTypes.DecryptParams): string {\n  const box = new ChaCha20Poly1305(fromString(params.symKey, BASE16));\n  const { sealed, iv } = deserialize(params.encoded);\n  const message = box.open(iv, sealed);\n  if (message === null) throw new Error(\"Failed to decrypt\");\n  return toString(message, UTF8);\n}\n\nexport function serialize(params: CryptoTypes.EncodingParams): string {\n  if (decodeTypeByte(params.type) === TYPE_1) {\n    if (typeof params.senderPublicKey === \"undefined\") {\n      throw new Error(\"Missing sender public key for type 1 envelope\");\n    }\n    return toString(\n      concat([params.type, params.senderPublicKey, params.iv, params.sealed]),\n      BASE64,\n    );\n  }\n  // default to type 0 envelope\n  return toString(concat([params.type, params.iv, params.sealed]), BASE64);\n}\n\nexport function deserialize(encoded: string): CryptoTypes.EncodingParams {\n  const bytes = fromString(encoded, BASE64);\n  const type = bytes.slice(ZERO_INDEX, TYPE_LENGTH);\n  const slice1 = TYPE_LENGTH;\n  if (decodeTypeByte(type) === TYPE_1) {\n    const slice2 = slice1 + KEY_LENGTH;\n    const slice3 = slice2 + IV_LENGTH;\n    const senderPublicKey = bytes.slice(slice1, slice2);\n    const iv = bytes.slice(slice2, slice3);\n    const sealed = bytes.slice(slice3);\n    return { type, sealed, iv, senderPublicKey };\n  }\n  // default to type 0 envelope\n  const slice2 = slice1 + IV_LENGTH;\n  const iv = bytes.slice(slice1, slice2);\n  const sealed = bytes.slice(slice2);\n  return { type, sealed, iv };\n}\n\nexport function validateDecoding(\n  encoded: string,\n  opts?: CryptoTypes.DecodeOptions,\n): CryptoTypes.EncodingValidation {\n  const deserialized = deserialize(encoded);\n  return validateEncoding({\n    type: decodeTypeByte(deserialized.type),\n    senderPublicKey:\n      typeof deserialized.senderPublicKey !== \"undefined\"\n        ? toString(deserialized.senderPublicKey, BASE16)\n        : undefined,\n    receiverPublicKey: opts?.receiverPublicKey,\n  });\n}\n\nexport function validateEncoding(opts?: CryptoTypes.EncodeOptions): CryptoTypes.EncodingValidation {\n  const type = opts?.type || TYPE_0;\n  if (type === TYPE_1) {\n    if (typeof opts?.senderPublicKey === \"undefined\") {\n      throw new Error(\"missing sender public key\");\n    }\n    if (typeof opts?.receiverPublicKey === \"undefined\") {\n      throw new Error(\"missing receiver public key\");\n    }\n  }\n  return {\n    type,\n    senderPublicKey: opts?.senderPublicKey,\n    receiverPublicKey: opts?.receiverPublicKey,\n  };\n}\n\nexport function isTypeOneEnvelope(\n  result: CryptoTypes.EncodingValidation,\n): result is CryptoTypes.TypeOneParams {\n  return (\n    result.type === TYPE_1 &&\n    typeof result.senderPublicKey === \"string\" &&\n    typeof result.receiverPublicKey === \"string\"\n  );\n}\n","import { detect } from \"detect-browser\";\nimport { FIVE_MINUTES, fromMiliseconds, toMiliseconds } from \"@walletconnect/time\";\nimport {\n  SignClientTypes,\n  RelayerClientMetadata,\n  EngineTypes,\n  RelayerTypes,\n} from \"@walletconnect/types\";\nimport { getDocument, getLocation, getNavigator } from \"@walletconnect/window-getters\";\nimport { getWindowMetadata } from \"@walletconnect/window-metadata\";\nimport { ErrorResponse } from \"@walletconnect/jsonrpc-utils\";\nimport { IKeyValueStorage } from \"@walletconnect/keyvaluestorage\";\nimport * as qs from \"query-string\";\n\n// -- constants -----------------------------------------//\nexport const REACT_NATIVE_PRODUCT = \"ReactNative\";\n\nexport const ENV_MAP = {\n  reactNative: \"react-native\",\n  node: \"node\",\n  browser: \"browser\",\n  unknown: \"unknown\",\n};\n\nexport const EMPTY_SPACE = \" \";\n\nexport const COLON = \":\";\n\nexport const SLASH = \"/\";\n\nexport const DEFAULT_DEPTH = 2;\n\nexport const ONE_THOUSAND = 1000;\n\nexport const SDK_TYPE = \"js\";\n\n// -- env -----------------------------------------------//\n\nexport function isNode(): boolean {\n  return (\n    typeof process !== \"undefined\" &&\n    typeof process.versions !== \"undefined\" &&\n    typeof process.versions.node !== \"undefined\"\n  );\n}\n\nexport function isReactNative(): boolean {\n  return !getDocument() && !!getNavigator() && navigator.product === REACT_NATIVE_PRODUCT;\n}\n\nexport function isBrowser(): boolean {\n  return !isNode() && !!getNavigator() && !!getDocument();\n}\n\nexport function getEnvironment(): string {\n  if (isReactNative()) return ENV_MAP.reactNative;\n  if (isNode()) return ENV_MAP.node;\n  if (isBrowser()) return ENV_MAP.browser;\n  return ENV_MAP.unknown;\n}\n\nexport function getBundleId(): string | undefined {\n  try {\n    if (\n      isReactNative() &&\n      typeof global !== \"undefined\" &&\n      typeof (global as any)?.Application !== \"undefined\"\n    ) {\n      return (global as any).Application?.applicationId;\n    }\n    return undefined;\n  } catch {\n    return undefined;\n  }\n}\n\n// -- query -----------------------------------------------//\n\nexport function appendToQueryString(queryString: string, newQueryParams: any): string {\n  let queryParams = qs.parse(queryString);\n\n  queryParams = { ...queryParams, ...newQueryParams };\n\n  queryString = qs.stringify(queryParams);\n\n  return queryString;\n}\n\n// -- metadata ----------------------------------------------//\n\nexport function getAppMetadata(): SignClientTypes.Metadata {\n  return (\n    getWindowMetadata() || {\n      name: \"\",\n      description: \"\",\n      url: \"\",\n      icons: [\"\"],\n    }\n  );\n}\n\nexport function getRelayClientMetadata(protocol: string, version: number): RelayerClientMetadata {\n  const env = getEnvironment();\n\n  const metadata: RelayerClientMetadata = { protocol, version, env };\n  if (env === \"browser\") {\n    metadata.host = getLocation()?.host || \"unknown\";\n  }\n  return metadata;\n}\n\n// -- rpcUrl ----------------------------------------------//\n\nexport function getJavascriptOS() {\n  const env = getEnvironment();\n  // global.Platform is set by react-native-compat\n  if (\n    env === ENV_MAP.reactNative &&\n    typeof global !== \"undefined\" &&\n    typeof (global as any)?.Platform !== \"undefined\"\n  ) {\n    const { OS, Version } = (global as any).Platform;\n    return [OS, Version].join(\"-\");\n  }\n\n  const info = detect();\n  if (info === null) return \"unknown\";\n  const os = info.os ? info.os.replace(\" \", \"\").toLowerCase() : \"unknown\";\n  if (info.type === \"browser\") {\n    return [os, info.name, info.version].join(\"-\");\n  }\n  return [os, info.version].join(\"-\");\n}\n\nexport function getJavascriptID() {\n  const env = getEnvironment();\n  return env === ENV_MAP.browser ? [env, getLocation()?.host || \"unknown\"].join(\":\") : env;\n}\n\nexport function formatUA(protocol: string, version: number, sdkVersion: string) {\n  const os = getJavascriptOS();\n  const id = getJavascriptID();\n  return [[protocol, version].join(\"-\"), [SDK_TYPE, sdkVersion].join(\"-\"), os, id].join(\"/\");\n}\nconsole;\n\nexport function formatRelayRpcUrl({\n  protocol,\n  version,\n  relayUrl,\n  sdkVersion,\n  auth,\n  projectId,\n  useOnCloseEvent,\n  bundleId,\n}: RelayerTypes.RpcUrlParams) {\n  const splitUrl = relayUrl.split(\"?\");\n  const ua = formatUA(protocol, version, sdkVersion);\n  const params = {\n    auth,\n    ua,\n    projectId,\n    useOnCloseEvent: useOnCloseEvent || undefined,\n    origin: bundleId || undefined,\n  };\n  const queryString = appendToQueryString(splitUrl[1] || \"\", params);\n  return splitUrl[0] + \"?\" + queryString;\n}\n\nexport function getHttpUrl(url: string) {\n  // regex from https://stackoverflow.com/questions/3883871/regexp-to-grab-protocol-from-url\n  const matches = url.match(/^[^:]+(?=:\\/\\/)/gi) || [];\n  let protocol = matches[0];\n  const domain = typeof protocol !== \"undefined\" ? url.split(\"://\")[1] : url;\n  protocol = protocol === \"wss\" ? \"https\" : \"http\";\n  return [protocol, domain].join(\"://\");\n}\n\n// -- assert ------------------------------------------------- //\n\nexport function assertType(obj: any, key: string, type: string) {\n  if (!obj[key] || typeof obj[key] !== type) {\n    throw new Error(`Missing or invalid \"${key}\" param`);\n  }\n}\n\n// -- context ------------------------------------------------- //\n\nexport function parseContextNames(context: string, depth = DEFAULT_DEPTH) {\n  return getLastItems(context.split(SLASH), depth);\n}\n\nexport function formatMessageContext(context: string): string {\n  return parseContextNames(context).join(EMPTY_SPACE);\n}\n\n// -- array ------------------------------------------------- //\n\nexport function hasOverlap(a: any[], b: any[]): boolean {\n  const matches = a.filter((x) => b.includes(x));\n  return matches.length === a.length;\n}\n\nexport function getLastItems(arr: any[], depth = DEFAULT_DEPTH): any[] {\n  return arr.slice(Math.max(arr.length - depth, 0));\n}\n\n// -- map ------------------------------------------------- //\n\nexport function mapToObj<T = any>(map: Map<string, T>): Record<string, T> {\n  return Object.fromEntries(map.entries());\n}\n\nexport function objToMap<T = any>(obj: Record<string, T>): Map<string, T> {\n  return new Map<string, T>(Object.entries<T>(obj));\n}\n\nexport function mapEntries<A = any, B = any>(\n  obj: Record<string, A>,\n  cb: (x: A) => B,\n): Record<string, B> {\n  const res = {};\n  Object.keys(obj).forEach((key) => {\n    res[key] = cb(obj[key]);\n  });\n  return res;\n}\n\n// -- enum ------------------------------------------------- //\n\n// source: https://github.com/microsoft/TypeScript/issues/3192#issuecomment-261720275\nexport const enumify = <T extends { [index: string]: U }, U extends string>(x: T): T => x;\n\n// -- string ------------------------------------------------- //\n\nexport function capitalizeWord(word: string) {\n  return word.trim().replace(/^\\w/, (c) => c.toUpperCase());\n}\n\nexport function capitalize(str: string) {\n  return str\n    .split(EMPTY_SPACE)\n    .map((w) => capitalizeWord(w))\n    .join(EMPTY_SPACE);\n}\n\n// -- promises --------------------------------------------- //\nexport function createDelayedPromise<T>(\n  expiry: number = FIVE_MINUTES,\n  expireErrorMessage?: string,\n) {\n  const timeout = toMiliseconds(expiry || FIVE_MINUTES);\n  let cacheResolve: undefined | ((value: T | PromiseLike<T>) => void);\n  let cacheReject: undefined | ((value?: ErrorResponse) => void);\n  let cacheTimeout: undefined | NodeJS.Timeout;\n\n  const done = () =>\n    new Promise<T>((promiseResolve, promiseReject) => {\n      cacheTimeout = setTimeout(() => {\n        promiseReject(new Error(expireErrorMessage));\n      }, timeout);\n      cacheResolve = promiseResolve;\n      cacheReject = promiseReject;\n    });\n  const resolve = (value?: T) => {\n    if (cacheTimeout && cacheResolve) {\n      clearTimeout(cacheTimeout);\n      cacheResolve(value as T);\n    }\n  };\n  const reject = (value?: ErrorResponse) => {\n    if (cacheTimeout && cacheReject) {\n      clearTimeout(cacheTimeout);\n      cacheReject(value);\n    }\n  };\n\n  return {\n    resolve,\n    reject,\n    done,\n  };\n}\n\nexport function createExpiringPromise<T>(\n  promise: Promise<T>,\n  expiry: number,\n  expireErrorMessage?: string,\n) {\n  return new Promise(async (resolve, reject) => {\n    const timeout = setTimeout(() => reject(new Error(expireErrorMessage)), expiry);\n    try {\n      const result = await promise;\n      resolve(result);\n    } catch (error) {\n      reject(error);\n    }\n    clearTimeout(timeout);\n  });\n}\n\n// -- expirer --------------------------------------------- //\n\nexport function formatExpirerTarget(type: \"topic\" | \"id\", value: string | number): string {\n  if (typeof value === \"string\" && value.startsWith(`${type}:`)) return value;\n  if (type.toLowerCase() === \"topic\") {\n    if (typeof value !== \"string\")\n      throw new Error(`Value must be \"string\" for expirer target type: topic`);\n    return `topic:${value}`;\n  } else if (type.toLowerCase() === \"id\") {\n    if (typeof value !== \"number\")\n      throw new Error(`Value must be \"number\" for expirer target type: id`);\n    return `id:${value}`;\n  }\n  throw new Error(`Unknown expirer target type: ${type}`);\n}\n\nexport function formatTopicTarget(topic: string): string {\n  return formatExpirerTarget(\"topic\", topic);\n}\n\nexport function formatIdTarget(id: number): string {\n  return formatExpirerTarget(\"id\", id);\n}\n\nexport function parseExpirerTarget(target: string) {\n  const [type, value] = target.split(\":\");\n  const parsed: { id?: number; topic?: string } = { id: undefined, topic: undefined };\n  if (type === \"topic\" && typeof value === \"string\") {\n    parsed.topic = value;\n  } else if (type === \"id\" && Number.isInteger(Number(value))) {\n    parsed.id = Number(value);\n  } else {\n    throw new Error(`Invalid target, expected id:number or topic:string, got ${type}:${value}`);\n  }\n\n  return parsed;\n}\n\nexport function calcExpiry(ttl: number, now?: number): number {\n  return fromMiliseconds((now || Date.now()) + toMiliseconds(ttl));\n}\n\nexport function isExpired(expiry: number) {\n  return Date.now() >= toMiliseconds(expiry);\n}\n\n// -- events ---------------------------------------------- //\n\nexport function engineEvent(event: EngineTypes.Event, id?: number | string | undefined) {\n  return `${event}${id ? `:${id}` : \"\"}`;\n}\n\nexport function mergeArrays<T>(a: T[] = [], b: T[] = []): T[] {\n  return [...new Set([...a, ...b])];\n}\n\nexport async function handleDeeplinkRedirect({\n  id,\n  topic,\n  wcDeepLink,\n}: {\n  id: number;\n  topic: string;\n  wcDeepLink: string;\n}) {\n  try {\n    if (!wcDeepLink) return;\n\n    const json = typeof wcDeepLink === \"string\" ? JSON.parse(wcDeepLink) : wcDeepLink;\n    let deeplink = json?.href;\n\n    if (typeof deeplink !== \"string\") return;\n\n    if (deeplink.endsWith(\"/\")) deeplink = deeplink.slice(0, -1);\n\n    const link = `${deeplink}/wc?requestId=${id}&sessionTopic=${topic}`;\n\n    const env = getEnvironment();\n\n    if (env === ENV_MAP.browser) {\n      if (link.startsWith(\"https://\")) {\n        window.open(link, \"_blank\", \"noreferrer noopener\");\n      } else {\n        window.open(link, \"_self\", \"noreferrer noopener\");\n      }\n    } else if (env === ENV_MAP.reactNative) {\n      // global.Linking is set by react-native-compat\n      if (typeof (global as any)?.Linking !== \"undefined\") {\n        await (global as any).Linking.openURL(link);\n      }\n    }\n  } catch (err) {\n    // Silent error, just log in console\n    // eslint-disable-next-line no-console\n    console.error(err);\n  }\n}\n\nexport async function getDeepLink(store: IKeyValueStorage, key: string) {\n  try {\n    const deepLink = await store.getItem(key);\n    if (deepLink) return deepLink;\n\n    // check localStorage as fallback\n    if (!isBrowser()) return;\n    return localStorage.getItem(key) as string;\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.error(err);\n  }\n}\n","import { RELAY_JSONRPC } from \"@walletconnect/relay-api\";\nimport { RelayerTypes } from \"@walletconnect/types\";\n\nexport const RELAYER_DEFAULT_PROTOCOL = \"irn\";\n\nexport function getRelayProtocolName(\n  opts?: RelayerTypes.RequestOptions,\n): RelayerTypes.ProtocolOptions {\n  return opts?.relay || { protocol: RELAYER_DEFAULT_PROTOCOL };\n}\n\nexport function getRelayProtocolApi(protocol: string) {\n  const jsonrpc = RELAY_JSONRPC[protocol];\n  if (typeof jsonrpc === \"undefined\") {\n    throw new Error(`Relay Protocol not supported: ${protocol}`);\n  }\n  return jsonrpc;\n}\n","import * as qs from \"query-string\";\nimport { EngineTypes, RelayerTypes } from \"@walletconnect/types\";\n\n// -- uri -------------------------------------------------- //\n\nexport function parseRelayParams(params: any, delimiter = \"-\"): RelayerTypes.ProtocolOptions {\n  const relay: any = {};\n  const prefix = \"relay\" + delimiter;\n  Object.keys(params).forEach((key) => {\n    if (key.startsWith(prefix)) {\n      const name = key.replace(prefix, \"\");\n      const value = params[key];\n      relay[name] = value;\n    }\n  });\n  return relay;\n}\n\nexport function parseUri(str: string): EngineTypes.UriParameters {\n  // remove android schema prefix\n  str = str.includes(\"wc://\") ? str.replace(\"wc://\", \"\") : str;\n  // remove ios schema prefix\n  str = str.includes(\"wc:\") ? str.replace(\"wc:\", \"\") : str;\n  const pathStart: number = str.indexOf(\":\");\n  const pathEnd: number | undefined = str.indexOf(\"?\") !== -1 ? str.indexOf(\"?\") : undefined;\n  const protocol: string = str.substring(0, pathStart);\n  const path: string = str.substring(pathStart + 1, pathEnd);\n  const requiredValues = path.split(\"@\");\n  const queryString: string = typeof pathEnd !== \"undefined\" ? str.substring(pathEnd) : \"\";\n  const queryParams = qs.parse(queryString);\n  const result = {\n    protocol,\n    topic: parseTopic(requiredValues[0]),\n    version: parseInt(requiredValues[1], 10),\n    symKey: queryParams.symKey as string,\n    relay: parseRelayParams(queryParams),\n    expiryTimestamp: queryParams.expiryTimestamp\n      ? parseInt(queryParams.expiryTimestamp as string, 10)\n      : undefined,\n  };\n  return result;\n}\n\nexport function parseTopic(topic: string): string {\n  return topic.startsWith(\"//\") ? topic.substring(2) : topic;\n}\n\nexport function formatRelayParams(relay: RelayerTypes.ProtocolOptions, delimiter = \"-\") {\n  const prefix = \"relay\";\n  const params: any = {};\n  Object.keys(relay).forEach((key) => {\n    const k = prefix + delimiter + key;\n    if (relay[key]) {\n      params[k] = relay[key];\n    }\n  });\n  return params;\n}\n\nexport function formatUri(params: EngineTypes.UriParameters): string {\n  return (\n    `${params.protocol}:${params.topic}@${params.version}?` +\n    qs.stringify({\n      symKey: params.symKey,\n      ...formatRelayParams(params.relay),\n      expiryTimestamp: params.expiryTimestamp,\n    })\n  );\n}\n","import { ProposalTypes, SessionTypes } from \"@walletconnect/types\";\nimport { mergeArrays } from \"./misc\";\nimport { isConformingNamespaces, isValidNamespaces, isValidObject } from \"./validators\";\n\nexport function getAccountsChains(accounts: SessionTypes.Namespace[\"accounts\"]) {\n  const chains: string[] = [];\n  accounts.forEach((account) => {\n    const [chain, chainId] = account.split(\":\");\n    chains.push(`${chain}:${chainId}`);\n  });\n\n  return chains;\n}\n\nexport function getNamespacesChains(namespaces: SessionTypes.Namespaces) {\n  const chains: string[] = [];\n  Object.values(namespaces).forEach((namespace) => {\n    chains.push(...getAccountsChains(namespace.accounts));\n  });\n\n  return chains;\n}\n\nexport function getNamespacesMethodsForChainId(\n  namespaces: SessionTypes.Namespaces,\n  chainId: string,\n) {\n  const methods: SessionTypes.Namespace[\"methods\"] = [];\n  Object.values(namespaces).forEach((namespace) => {\n    const chains = getAccountsChains(namespace.accounts);\n    if (chains.includes(chainId)) methods.push(...namespace.methods);\n  });\n\n  return methods;\n}\n\nexport function getNamespacesEventsForChainId(\n  namespaces: SessionTypes.Namespaces,\n  chainId: string,\n) {\n  const events: SessionTypes.Namespace[\"events\"] = [];\n  Object.values(namespaces).forEach((namespace) => {\n    const chains = getAccountsChains(namespace.accounts);\n    if (chains.includes(chainId)) events.push(...namespace.events);\n  });\n\n  return events;\n}\n\nexport function getRequiredNamespacesFromNamespaces(\n  namespaces: SessionTypes.Namespaces,\n  caller: string,\n): ProposalTypes.RequiredNamespaces {\n  const validNamespacesError = isValidNamespaces(namespaces, caller);\n  if (validNamespacesError) throw new Error(validNamespacesError.message);\n\n  const required = {};\n  for (const [namespace, values] of Object.entries(namespaces)) {\n    required[namespace] = {\n      methods: values.methods,\n      events: values.events,\n      chains: values.accounts.map((account) => `${account.split(\":\")[0]}:${account.split(\":\")[1]}`),\n    };\n  }\n  return required;\n}\n\nexport type BuildApprovedNamespacesParams = {\n  proposal: ProposalTypes.Struct;\n  supportedNamespaces: Record<\n    string,\n    { chains: string[]; methods: string[]; events: string[]; accounts: string[] }\n  >;\n};\n\n/**\n * util designed for Wallets that builds namespaces structure by provided supported chains, methods, events & accounts.\n * It takes required & optional namespaces provided in the session proposal\n * along with the supported chains/methods/events/accounts by the wallet and returns a structured namespaces object\n * @param {BuildApprovedNamespacesParams} params\n * @returns {SessionTypes.Namespaces}\n */\nexport function buildApprovedNamespaces(\n  params: BuildApprovedNamespacesParams,\n): SessionTypes.Namespaces {\n  const {\n    proposal: { requiredNamespaces, optionalNamespaces = {} },\n    supportedNamespaces,\n  } = params;\n  const normalizedRequired = normalizeNamespaces(requiredNamespaces);\n  const normalizedOptional = normalizeNamespaces(optionalNamespaces);\n\n  // build approved namespaces\n  const namespaces = {};\n  Object.keys(supportedNamespaces).forEach((namespace) => {\n    const supportedChains = supportedNamespaces[namespace].chains;\n    const supportedMethods = supportedNamespaces[namespace].methods;\n    const supportedEvents = supportedNamespaces[namespace].events;\n    const supportedAccounts = supportedNamespaces[namespace].accounts;\n\n    supportedChains.forEach((chain) => {\n      if (!supportedAccounts.some((account) => account.includes(chain))) {\n        throw new Error(`No accounts provided for chain ${chain} in namespace ${namespace}`);\n      }\n    });\n\n    namespaces[namespace] = {\n      chains: supportedChains,\n      methods: supportedMethods,\n      events: supportedEvents,\n      accounts: supportedAccounts,\n    };\n  });\n\n  // verify all required namespaces are supported\n  const err = isConformingNamespaces(requiredNamespaces, namespaces, \"approve()\");\n  if (err) throw new Error(err.message);\n\n  const approvedNamespaces = {};\n\n  // if both required & optional namespaces are empty, return all supported namespaces by the wallet\n  if (!Object.keys(requiredNamespaces).length && !Object.keys(optionalNamespaces).length)\n    return namespaces;\n\n  // assign accounts for the required namespaces\n  Object.keys(normalizedRequired).forEach((requiredNamespace) => {\n    const chains = supportedNamespaces[requiredNamespace].chains.filter((chain) =>\n      normalizedRequired[requiredNamespace]?.chains?.includes(chain),\n    );\n    const methods = supportedNamespaces[requiredNamespace].methods.filter((method) =>\n      normalizedRequired[requiredNamespace]?.methods?.includes(method),\n    );\n    const events = supportedNamespaces[requiredNamespace].events.filter((event) =>\n      normalizedRequired[requiredNamespace]?.events?.includes(event),\n    );\n\n    const accounts = chains\n      .map((chain: string) =>\n        supportedNamespaces[requiredNamespace].accounts.filter((account: string) =>\n          account.includes(`${chain}:`),\n        ),\n      )\n      .flat();\n\n    approvedNamespaces[requiredNamespace] = {\n      chains,\n      methods,\n      events,\n      accounts,\n    };\n  });\n\n  // add optional namespaces\n  Object.keys(normalizedOptional).forEach((optionalNamespace) => {\n    if (!supportedNamespaces[optionalNamespace]) return;\n\n    const chainsToAdd = normalizedOptional[optionalNamespace]?.chains?.filter((chain) =>\n      supportedNamespaces[optionalNamespace].chains.includes(chain),\n    );\n    const methodsToAdd = supportedNamespaces[optionalNamespace].methods.filter((method) =>\n      normalizedOptional[optionalNamespace]?.methods?.includes(method),\n    );\n    const eventsToAdd = supportedNamespaces[optionalNamespace].events.filter((event) =>\n      normalizedOptional[optionalNamespace]?.events?.includes(event),\n    );\n\n    const accountsToAdd = chainsToAdd\n      ?.map((chain: string) =>\n        supportedNamespaces[optionalNamespace].accounts.filter((account: string) =>\n          account.includes(`${chain}:`),\n        ),\n      )\n      .flat();\n\n    approvedNamespaces[optionalNamespace] = {\n      chains: mergeArrays(approvedNamespaces[optionalNamespace]?.chains, chainsToAdd),\n      methods: mergeArrays(approvedNamespaces[optionalNamespace]?.methods, methodsToAdd),\n      events: mergeArrays(approvedNamespaces[optionalNamespace]?.events, eventsToAdd),\n      accounts: mergeArrays(approvedNamespaces[optionalNamespace]?.accounts, accountsToAdd),\n    };\n  });\n\n  return approvedNamespaces;\n}\n\nexport function isCaipNamespace(namespace: string): boolean {\n  return namespace.includes(\":\");\n}\n\nexport function parseNamespaceKey(namespace: string) {\n  return isCaipNamespace(namespace) ? namespace.split(\":\")[0] : namespace;\n}\n\n/**\n * Converts\n * ```\n * {\n *  \"eip155:1\": {...},\n *  \"eip155:2\": {...},\n * }\n * ```\n * into\n * ```\n * {\n *  \"eip155\": {\n *      chains: [\"eip155:1\", \"eip155:2\"],\n *      ...\n *    }\n * }\n *```\n */\nexport function normalizeNamespaces(\n  namespaces: ProposalTypes.RequiredNamespaces,\n): ProposalTypes.RequiredNamespaces {\n  const normalizedNamespaces = {} as ProposalTypes.RequiredNamespaces;\n  if (!isValidObject(namespaces)) return normalizedNamespaces;\n  for (const [key, values] of Object.entries(namespaces)) {\n    const chains = isCaipNamespace(key) ? [key] : values.chains;\n    const methods = values.methods || [];\n    const events = values.events || [];\n    const normalizedKey = parseNamespaceKey(key);\n    normalizedNamespaces[normalizedKey] = {\n      ...normalizedNamespaces[normalizedKey],\n      chains: mergeArrays(chains, normalizedNamespaces[normalizedKey]?.chains),\n      methods: mergeArrays(methods, normalizedNamespaces[normalizedKey]?.methods),\n      events: mergeArrays(events, normalizedNamespaces[normalizedKey]?.events),\n    };\n  }\n  return normalizedNamespaces;\n}\n","/**\n * Types\n */\nexport type SdkErrorKey = keyof typeof SDK_ERRORS;\nexport type InternalErrorKey = keyof typeof INTERNAL_ERRORS;\n\n/**\n * Constants\n */\nexport const SDK_ERRORS = {\n  /* ----- INVALID (1xxx) ----- */\n  INVALID_METHOD: {\n    message: \"Invalid method.\",\n    code: 1001,\n  },\n  INVALID_EVENT: {\n    message: \"Invalid event.\",\n    code: 1002,\n  },\n  INVALID_UPDATE_REQUEST: {\n    message: \"Invalid update request.\",\n    code: 1003,\n  },\n  INVALID_EXTEND_REQUEST: {\n    message: \"Invalid extend request.\",\n    code: 1004,\n  },\n  INVALID_SESSION_SETTLE_REQUEST: {\n    message: \"Invalid session settle request.\",\n    code: 1005,\n  },\n  /* ----- UNAUTHORIZED (3xxx) ----- */\n  UNAUTHORIZED_METHOD: {\n    message: \"Unauthorized method.\",\n    code: 3001,\n  },\n  UNAUTHORIZED_EVENT: {\n    message: \"Unauthorized event.\",\n    code: 3002,\n  },\n  UNAUTHORIZED_UPDATE_REQUEST: {\n    message: \"Unauthorized update request.\",\n    code: 3003,\n  },\n  UNAUTHORIZED_EXTEND_REQUEST: {\n    message: \"Unauthorized extend request.\",\n    code: 3004,\n  },\n  /* ----- REJECTED (5xxx) ----- */\n  USER_REJECTED: {\n    message: \"User rejected.\",\n    code: 5000,\n  },\n  USER_REJECTED_CHAINS: {\n    message: \"User rejected chains.\",\n    code: 5001,\n  },\n  USER_REJECTED_METHODS: {\n    message: \"User rejected methods.\",\n    code: 5002,\n  },\n  USER_REJECTED_EVENTS: {\n    message: \"User rejected events.\",\n    code: 5003,\n  },\n  UNSUPPORTED_CHAINS: {\n    message: \"Unsupported chains.\",\n    code: 5100,\n  },\n  UNSUPPORTED_METHODS: {\n    message: \"Unsupported methods.\",\n    code: 5101,\n  },\n  UNSUPPORTED_EVENTS: {\n    message: \"Unsupported events.\",\n    code: 5102,\n  },\n  UNSUPPORTED_ACCOUNTS: {\n    message: \"Unsupported accounts.\",\n    code: 5103,\n  },\n  UNSUPPORTED_NAMESPACE_KEY: {\n    message: \"Unsupported namespace key.\",\n    code: 5104,\n  },\n  /* ----- REASON (6xxx) ----- */\n  USER_DISCONNECTED: {\n    message: \"User disconnected.\",\n    code: 6000,\n  },\n  /* ----- FAILURE (7xxx) ----- */\n  SESSION_SETTLEMENT_FAILED: {\n    message: \"Session settlement failed.\",\n    code: 7000,\n  },\n  /* ----- PAIRING (10xxx) ----- */\n  WC_METHOD_UNSUPPORTED: {\n    message: \"Unsupported wc_ method.\",\n    code: 10001,\n  },\n};\n\nexport const INTERNAL_ERRORS = {\n  NOT_INITIALIZED: {\n    message: \"Not initialized.\",\n    code: 1,\n  },\n  NO_MATCHING_KEY: {\n    message: \"No matching key.\",\n    code: 2,\n  },\n  RESTORE_WILL_OVERRIDE: {\n    message: \"Restore will override.\",\n    code: 3,\n  },\n  RESUBSCRIBED: {\n    message: \"Resubscribed.\",\n    code: 4,\n  },\n  MISSING_OR_INVALID: {\n    message: \"Missing or invalid.\",\n    code: 5,\n  },\n  EXPIRED: {\n    message: \"Expired.\",\n    code: 6,\n  },\n  UNKNOWN_TYPE: {\n    message: \"Unknown type.\",\n    code: 7,\n  },\n  MISMATCHED_TOPIC: {\n    message: \"Mismatched topic.\",\n    code: 8,\n  },\n  NON_CONFORMING_NAMESPACES: {\n    message: \"Non conforming namespaces.\",\n    code: 9,\n  },\n};\n\n/**\n * Utilities\n */\nexport function getInternalError(key: InternalErrorKey, context?: string | number) {\n  const { message, code } = INTERNAL_ERRORS[key];\n  return {\n    message: context ? `${message} ${context}` : message,\n    code,\n  };\n}\n\nexport function getSdkError(key: SdkErrorKey, context?: string | number) {\n  const { message, code } = SDK_ERRORS[key];\n  return {\n    message: context ? `${message} ${context}` : message,\n    code,\n  };\n}\n","import { SessionTypes, ProposalTypes, RelayerTypes, EngineTypes } from \"@walletconnect/types\";\nimport { ErrorResponse } from \"@walletconnect/jsonrpc-types\";\nimport {\n  getNamespacesChains,\n  getNamespacesMethodsForChainId,\n  getNamespacesEventsForChainId,\n  getAccountsChains,\n} from \"./namespaces\";\nimport { getSdkError, getInternalError } from \"./errors\";\nimport { hasOverlap } from \"./misc\";\nimport { getChainsFromNamespace } from \"./caip\";\n\nexport type ErrorObject = { message: string; code: number } | null;\n\n// -- types validation ----------------------------------------------------- //\n\nexport function isValidArray(arr: any, itemCondition?: (item: any) => boolean) {\n  if (Array.isArray(arr)) {\n    if (typeof itemCondition !== \"undefined\" && arr.length) {\n      return arr.every(itemCondition);\n    } else {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function isValidObject(obj: any) {\n  return Object.getPrototypeOf(obj) === Object.prototype && Object.keys(obj).length;\n}\n\nexport function isUndefined(input: any): input is undefined {\n  return typeof input === \"undefined\";\n}\n\nexport function isValidString(input: any, optional: boolean): input is string {\n  if (optional && isUndefined(input)) return true;\n\n  return typeof input === \"string\" && Boolean(input.trim().length);\n}\n\nexport function isValidNumber(input: any, optional: boolean) {\n  if (optional && isUndefined(input)) return true;\n\n  return typeof input === \"number\" && !isNaN(input);\n}\n\n// -- protocol validation -------------------------------------------------- //\n\nexport function isSessionCompatible(session: SessionTypes.Struct, params: EngineTypes.FindParams) {\n  const { requiredNamespaces } = params;\n  const sessionKeys = Object.keys(session.namespaces);\n  const paramsKeys = Object.keys(requiredNamespaces);\n  let compatible = true;\n\n  if (!hasOverlap(paramsKeys, sessionKeys)) return false;\n\n  sessionKeys.forEach((key) => {\n    const { accounts, methods, events } = session.namespaces[key];\n    const chains = getAccountsChains(accounts);\n    const requiredNamespace = requiredNamespaces[key];\n    if (\n      !hasOverlap(getChainsFromNamespace(key, requiredNamespace), chains) ||\n      !hasOverlap(requiredNamespace.methods, methods) ||\n      !hasOverlap(requiredNamespace.events, events)\n    ) {\n      compatible = false;\n    }\n  });\n\n  return compatible;\n}\n\nexport function isValidChainId(value: any) {\n  if (isValidString(value, false) && value.includes(\":\")) {\n    const split = value.split(\":\");\n    return split.length === 2;\n  }\n  return false;\n}\n\nexport function isValidAccountId(value: any) {\n  if (isValidString(value, false) && value.includes(\":\")) {\n    const split = value.split(\":\");\n    if (split.length === 3) {\n      const chainId = split[0] + \":\" + split[1];\n      return !!split[2] && isValidChainId(chainId);\n    }\n  }\n  return false;\n}\n\nexport function isValidUrl(value: any) {\n  if (isValidString(value, false)) {\n    try {\n      const url = new URL(value);\n      return typeof url !== \"undefined\";\n    } catch (e) {\n      return false;\n    }\n  }\n  return false;\n}\n\nexport function isProposalStruct(input: any): input is ProposalTypes.Struct {\n  return input?.proposer?.publicKey;\n}\n\nexport function isSessionStruct(input: any): input is SessionTypes.Struct {\n  return input?.topic;\n}\n\nexport function isValidController(input: any, method: string) {\n  let error: ErrorObject = null;\n  if (!isValidString(input?.publicKey, false)) {\n    error = getInternalError(\n      \"MISSING_OR_INVALID\",\n      `${method} controller public key should be a string`,\n    );\n  }\n\n  return error;\n}\n\nexport function isValidNamespaceMethodsOrEvents(input: any): input is string {\n  let valid = true;\n  if (isValidArray(input)) {\n    if (input.length) {\n      valid = input.every((item: any) => isValidString(item, false));\n    }\n  } else {\n    valid = false;\n  }\n\n  return valid;\n}\n\nexport function isValidChains(key: string, chains: any, context: string) {\n  let error: ErrorObject = null;\n\n  if (isValidArray(chains) && chains.length) {\n    chains.forEach((chain: any) => {\n      if (error) return;\n      if (!isValidChainId(chain)) {\n        error = getSdkError(\n          \"UNSUPPORTED_CHAINS\",\n          `${context}, chain ${chain} should be a string and conform to \"namespace:chainId\" format`,\n        );\n      }\n    });\n  } else if (!isValidChainId(key)) {\n    error = getSdkError(\n      \"UNSUPPORTED_CHAINS\",\n      `${context}, chains must be defined as \"namespace:chainId\" e.g. \"eip155:1\": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: [\"eip155:1\", \"eip155:5\"] }`,\n    );\n  }\n\n  return error;\n}\n\nexport function isValidNamespaceChains(namespaces: any, method: string, type: string) {\n  let error: ErrorObject = null;\n  Object.entries(namespaces).forEach(([key, namespace]: [string, any]) => {\n    if (error) return;\n    const validChainsError = isValidChains(\n      key,\n      getChainsFromNamespace(key, namespace),\n      `${method} ${type}`,\n    );\n    if (validChainsError) {\n      error = validChainsError;\n    }\n  });\n\n  return error;\n}\n\nexport function isValidAccounts(accounts: any, context: string) {\n  let error: ErrorObject = null;\n  if (isValidArray(accounts)) {\n    accounts.forEach((account: any) => {\n      if (error) return;\n      if (!isValidAccountId(account)) {\n        error = getSdkError(\n          \"UNSUPPORTED_ACCOUNTS\",\n          `${context}, account ${account} should be a string and conform to \"namespace:chainId:address\" format`,\n        );\n      }\n    });\n  } else {\n    error = getSdkError(\n      \"UNSUPPORTED_ACCOUNTS\",\n      `${context}, accounts should be an array of strings conforming to \"namespace:chainId:address\" format`,\n    );\n  }\n\n  return error;\n}\n\nexport function isValidNamespaceAccounts(input: any, method: string) {\n  let error: ErrorObject = null;\n  Object.values(input).forEach((namespace: any) => {\n    if (error) return;\n    const validAccountsError = isValidAccounts(namespace?.accounts, `${method} namespace`);\n    if (validAccountsError) {\n      error = validAccountsError;\n    }\n  });\n\n  return error;\n}\n\nexport function isValidActions(namespace: any, context: string) {\n  let error: ErrorObject = null;\n  if (!isValidNamespaceMethodsOrEvents(namespace?.methods)) {\n    error = getSdkError(\n      \"UNSUPPORTED_METHODS\",\n      `${context}, methods should be an array of strings or empty array for no methods`,\n    );\n  } else if (!isValidNamespaceMethodsOrEvents(namespace?.events)) {\n    error = getSdkError(\n      \"UNSUPPORTED_EVENTS\",\n      `${context}, events should be an array of strings or empty array for no events`,\n    );\n  }\n\n  return error;\n}\n\nexport function isValidNamespaceActions(input: any, method: string) {\n  let error: ErrorObject = null;\n  Object.values(input).forEach((namespace: any) => {\n    if (error) return;\n    const validActionsError = isValidActions(namespace, `${method}, namespace`);\n    if (validActionsError) {\n      error = validActionsError;\n    }\n  });\n\n  return error;\n}\n\nexport function isValidRequiredNamespaces(input: any, method: string, type: string) {\n  let error: ErrorObject = null;\n  if (input && isValidObject(input)) {\n    const validActionsError = isValidNamespaceActions(input, method);\n    if (validActionsError) {\n      error = validActionsError;\n    }\n    const validChainsError = isValidNamespaceChains(input, method, type);\n    if (validChainsError) {\n      error = validChainsError;\n    }\n  } else {\n    error = getInternalError(\n      \"MISSING_OR_INVALID\",\n      `${method}, ${type} should be an object with data`,\n    );\n  }\n\n  return error;\n}\n\nexport function isValidNamespaces(input: any, method: string) {\n  let error: ErrorObject = null;\n  if (input && isValidObject(input)) {\n    const validActionsError = isValidNamespaceActions(input, method);\n    if (validActionsError) {\n      error = validActionsError;\n    }\n    const validAccountsError = isValidNamespaceAccounts(input, method);\n    if (validAccountsError) {\n      error = validAccountsError;\n    }\n  } else {\n    error = getInternalError(\n      \"MISSING_OR_INVALID\",\n      `${method}, namespaces should be an object with data`,\n    );\n  }\n\n  return error;\n}\n\nexport function isValidRelay(input: any): input is RelayerTypes.ProtocolOptions {\n  return isValidString(input.protocol, true);\n}\n\nexport function isValidRelays(\n  input: any,\n  optional: boolean,\n): input is RelayerTypes.ProtocolOptions[] {\n  let valid = false;\n\n  if (optional && !input) valid = true;\n  else if (input && isValidArray(input) && input.length) {\n    input.forEach((relay: RelayerTypes.ProtocolOptions) => {\n      valid = isValidRelay(relay);\n    });\n  }\n\n  return valid;\n}\n\nexport function isValidId(input: any) {\n  return typeof input === \"number\";\n}\n\nexport function isValidParams(input: any) {\n  return typeof input !== \"undefined\" && typeof input !== null;\n}\n\nexport function isValidErrorReason(input: any): input is ErrorResponse {\n  if (!input) return false;\n  if (typeof input !== \"object\") return false;\n  if (!input.code || !isValidNumber(input.code, false)) return false;\n  if (!input.message || !isValidString(input.message, false)) return false;\n\n  return true;\n}\n\nexport function isValidRequest(request: any) {\n  if (isUndefined(request)) return false;\n  if (!isValidString(request.method, false)) return false;\n  return true;\n}\n\nexport function isValidResponse(response: any) {\n  if (isUndefined(response)) return false;\n  if (isUndefined(response.result) && isUndefined(response.error)) return false;\n  if (!isValidNumber(response.id, false)) return false;\n  if (!isValidString(response.jsonrpc, false)) return false;\n  return true;\n}\n\nexport function isValidEvent(event: any) {\n  if (isUndefined(event)) return false;\n  if (!isValidString(event.name, false)) return false;\n  return true;\n}\n\nexport function isValidNamespacesChainId(namespaces: SessionTypes.Namespaces, chainId: string) {\n  if (!isValidChainId(chainId)) return false;\n  const chains = getNamespacesChains(namespaces);\n  if (!chains.includes(chainId)) return false;\n\n  return true;\n}\n\nexport function isValidNamespacesRequest(\n  namespaces: SessionTypes.Namespaces,\n  chainId: string,\n  method: string,\n) {\n  if (!isValidString(method, false)) return false;\n  const methods = getNamespacesMethodsForChainId(namespaces, chainId);\n  return methods.includes(method);\n}\n\nexport function isValidNamespacesEvent(\n  namespaces: SessionTypes.Namespaces,\n  chainId: string,\n  eventName: string,\n) {\n  if (!isValidString(eventName, false)) return false;\n  const events = getNamespacesEventsForChainId(namespaces, chainId);\n  return events.includes(eventName);\n}\n\nexport function isConformingNamespaces(\n  requiredNamespaces: ProposalTypes.RequiredNamespaces,\n  namespaces: SessionTypes.Namespaces,\n  context: string,\n) {\n  let error: ErrorObject = null;\n\n  const parsedRequired = parseNamespaces(requiredNamespaces);\n  const parsedApproved = parseApprovedNamespaces(namespaces);\n  const requiredChains = Object.keys(parsedRequired);\n  const approvedChains = Object.keys(parsedApproved);\n\n  const uniqueRequired = filterDuplicateNamespaces(Object.keys(requiredNamespaces));\n  const uniqueApproved = filterDuplicateNamespaces(Object.keys(namespaces));\n  const missingRequiredNamespaces = uniqueRequired.filter(\n    (namespace) => !uniqueApproved.includes(namespace),\n  );\n\n  if (missingRequiredNamespaces.length) {\n    error = getInternalError(\n      \"NON_CONFORMING_NAMESPACES\",\n      `${context} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${missingRequiredNamespaces.toString()}\n      Received: ${Object.keys(namespaces).toString()}`,\n    );\n  }\n\n  if (!hasOverlap(requiredChains, approvedChains)) {\n    error = getInternalError(\n      \"NON_CONFORMING_NAMESPACES\",\n      `${context} namespaces chains don't satisfy required namespaces.\n      Required: ${requiredChains.toString()}\n      Approved: ${approvedChains.toString()}`,\n    );\n  }\n\n  // validate inline defined chains with approved accounts\n  Object.keys(namespaces).forEach((chain) => {\n    if (!chain.includes(\":\")) return;\n    if (error) return;\n    const chains = getAccountsChains(namespaces[chain].accounts);\n    if (!chains.includes(chain)) {\n      error = getInternalError(\n        \"NON_CONFORMING_NAMESPACES\",\n        `${context} namespaces accounts don't satisfy namespace accounts for ${chain}\n        Required: ${chain}\n        Approved: ${chains.toString()}`,\n      );\n    }\n  });\n\n  requiredChains.forEach((chain) => {\n    if (error) return;\n\n    if (!hasOverlap(parsedRequired[chain].methods, parsedApproved[chain].methods)) {\n      error = getInternalError(\n        \"NON_CONFORMING_NAMESPACES\",\n        `${context} namespaces methods don't satisfy namespace methods for ${chain}`,\n      );\n    } else if (!hasOverlap(parsedRequired[chain].events, parsedApproved[chain].events)) {\n      error = getInternalError(\n        \"NON_CONFORMING_NAMESPACES\",\n        `${context} namespaces events don't satisfy namespace events for ${chain}`,\n      );\n    }\n  });\n\n  return error;\n}\n\nfunction parseNamespaces(namespaces: ProposalTypes.RequiredNamespaces) {\n  const parsed = {};\n  Object.keys(namespaces).forEach((key) => {\n    // e.g. `eip155:1`\n    const isInlineChainDefinition = key.includes(\":\");\n\n    if (isInlineChainDefinition) {\n      parsed[key] = namespaces[key];\n    } else {\n      namespaces[key].chains?.forEach((chain) => {\n        parsed[chain] = {\n          methods: namespaces[key].methods,\n          events: namespaces[key].events,\n        };\n      });\n    }\n  });\n  return parsed;\n}\n\nfunction filterDuplicateNamespaces(namespaces: string[]) {\n  return [\n    ...new Set(\n      namespaces.map((namespace) =>\n        namespace.includes(\":\") ? namespace.split(\":\")[0] : namespace,\n      ),\n    ),\n  ];\n}\n\nfunction parseApprovedNamespaces(namespaces: SessionTypes.Namespaces) {\n  const parsed = {};\n  Object.keys(namespaces).forEach((key) => {\n    const isInlineChainDefinition = key.includes(\":\");\n    if (isInlineChainDefinition) {\n      parsed[key] = namespaces[key];\n    } else {\n      const chains = getAccountsChains(namespaces[key].accounts);\n      chains?.forEach((chain) => {\n        parsed[chain] = {\n          accounts: namespaces[key].accounts.filter((account: string) =>\n            account.includes(`${chain}:`),\n          ),\n          methods: namespaces[key].methods,\n          events: namespaces[key].events,\n        };\n      });\n    }\n  });\n  return parsed;\n}\n\nexport function isValidRequestExpiry(expiry: number, boundaries: { min: number; max: number }) {\n  return isValidNumber(expiry, false) && expiry <= boundaries.max && expiry >= boundaries.min;\n}\n","import { getEnvironment, ENV_MAP, isBrowser, isReactNative } from \"./misc\";\n\nexport function isOnline(): Promise<boolean> {\n  const env = getEnvironment();\n  return new Promise((resolve) => {\n    switch (env) {\n      case ENV_MAP.browser:\n        resolve(getBrowserOnlineStatus());\n        break;\n      case ENV_MAP.reactNative:\n        resolve(getReactNativeOnlineStatus());\n        break;\n      case ENV_MAP.node:\n        resolve(getNodeOnlineStatus());\n        break;\n      default:\n        resolve(true);\n    }\n  });\n}\n\nexport function getBrowserOnlineStatus() {\n  return isBrowser() && navigator?.onLine;\n}\n\nexport async function getReactNativeOnlineStatus(): Promise<boolean> {\n  // global.NetInfo is set in react-native-compat\n  if (isReactNative() && typeof global !== \"undefined\" && (global as any)?.NetInfo) {\n    const state = await (global as any)?.NetInfo.fetch();\n    return state?.isConnected;\n  }\n  // fallback to true if global.NetInfo is undefined, meaning an older version of react-native-compat is used\n  return true;\n}\n\nexport function getNodeOnlineStatus() {\n  /**\n   * TODO: need to implement\n   */\n  return true;\n}\n\nexport function subscribeToNetworkChange(callbackHandler: (connected: boolean) => void) {\n  const env = getEnvironment();\n  switch (env) {\n    case ENV_MAP.browser:\n      subscribeToBrowserNetworkChange(callbackHandler);\n      break;\n    case ENV_MAP.reactNative:\n      subscribeToReactNativeNetworkChange(callbackHandler);\n      break;\n    case ENV_MAP.node:\n      // wip: need to implement\n      break;\n    default:\n      break;\n  }\n}\n\nexport function subscribeToBrowserNetworkChange(callbackHandler: (connected: boolean) => void) {\n  if (!isReactNative() && isBrowser()) {\n    window.addEventListener(\"online\", () => callbackHandler(true));\n    window.addEventListener(\"offline\", () => callbackHandler(false));\n  }\n}\n\n// global.NetInfo is set in react-native-compat\nexport function subscribeToReactNativeNetworkChange(callbackHandler: (connected: boolean) => void) {\n  if (isReactNative() && typeof global !== \"undefined\" && (global as any)?.NetInfo) {\n    (global as any)?.NetInfo.addEventListener((state: any) => callbackHandler(state?.isConnected));\n  }\n}\n","const memoryStore = {};\n\nexport abstract class MemoryStore {\n  static get<T = unknown>(key: string) {\n    return memoryStore[key] as T | undefined;\n  }\n\n  static set(key: string, value: unknown) {\n    memoryStore[key] = value;\n  }\n\n  static delete(key: string) {\n    delete memoryStore[key];\n  }\n}\n"],"names":["CAIP_DELIMITER","chain","namespace","reference","params","account","address","array","parser","unique","str","value","accounts","namespaces","keys","key","ns","chains","requiredNamespaces","namespaceProps","iss","segments","cacao","header","walletAddress","statement","uri","version","chainId","nonce","issuedAt","resources","resource","val","ZERO_INDEX","TYPE_LENGTH","IV_LENGTH","KEY_LENGTH","keyPair","x25519","toString","random","randomBytes","privateKeyA","publicKeyB","sharedKey","fromString","symKey","HKDF","SHA256","result","hash","message","type","byte","senderPublicKey","iv","sealed","ChaCha20Poly1305","box","concat","encoded","bytes","slice1","slice2","slice3","opts","deserialized","g","l","u","getDocument","getNavigator","_a","e","queryString","newQueryParams","queryParams","qs","__spreadValues","getWindowMetadata","protocol","env","metadata","getLocation","OS","Version","info","detect","os","sdkVersion","id","relayUrl","auth","projectId","useOnCloseEvent","bundleId","splitUrl","ua","url","domain","obj","context","depth","a","b","x","arr","map","cb","res","word","c","w","expiry","FIVE_MINUTES","expireErrorMessage","timeout","toMiliseconds","cacheResolve","cacheReject","cacheTimeout","promiseResolve","promiseReject","promise","resolve","reject","error","topic","target","parsed","ttl","now","fromMiliseconds","event","wcDeepLink","json","deeplink","link","err","store","deepLink","jsonrpc","RELAY_JSONRPC","delimiter","relay","prefix","name","pathStart","pathEnd","requiredValues","k","__spreadProps","R","S","methods","events","caller","validNamespacesError","isValidNamespaces","required","values","optionalNamespaces","supportedNamespaces","normalizedRequired","normalizedOptional","supportedChains","supportedMethods","supportedEvents","supportedAccounts","isConformingNamespaces","approvedNamespaces","requiredNamespace","_b","method","optionalNamespace","_c","_d","_e","_f","chainsToAdd","methodsToAdd","eventsToAdd","accountsToAdd","mergeArrays","normalizedNamespaces","isValidObject","normalizedKey","code","itemCondition","input","optional","session","sessionKeys","paramsKeys","compatible","hasOverlap","getAccountsChains","getChainsFromNamespace","split","getInternalError","valid","item","getSdkError","validChainsError","validAccountsError","validActionsError","request","response","getNamespacesChains","getNamespacesMethodsForChainId","eventName","getNamespacesEventsForChainId","parsedRequired","parseNamespaces","parsedApproved","parseApprovedNamespaces","requiredChains","approvedChains","uniqueRequired","filterDuplicateNamespaces","uniqueApproved","missingRequiredNamespaces","boundaries","getEnvironment","ENV_MAP","isBrowser","isReactNative","state","callbackHandler","memoryStore"],"mappings":"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"}