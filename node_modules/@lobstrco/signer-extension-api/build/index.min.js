!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.lobstrExtensionApi=n():e.lobstrExtensionApi=n()}(this,(()=>(()=>{"use strict";var e,n,o,t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},i={};t.r(i),t.d(i,{default:()=>S,getPublicKey:()=>c,isBrowser:()=>T,isConnected:()=>a,signTransaction:()=>d}),function(e){e.LOAD_STATE="LOAD_STATE",e.LOGIN="LOGIN",e.LOGOUT="LOGOUT",e.SIGN_TRANSACTION="SIGN_TRANSACTION",e.REJECT_TRANSACTION="REJECT_TRANSACTION",e.GRANT_ACCESS="GRANT_ACCESS",e.REJECT_ACCESS="REJECT_ACCESS"}(e||(e={})),function(e){e.REQUEST_ACCESS="REQUEST_ACCESS",e.SIGN_TRANSACTION="SUBMIT_TRANSACTION",e.REQUEST_CONNECTION_STATUS="REQUEST_CONNECTION_STATUS"}(n||(n={})),function(e){e.pending="pending",e.signed="signed",e.rejected="rejected"}(o||(o={}));const r="LOBSTR_CONNECTION_KEY",s=e=>{const o=Date.now()+Math.random();return window.postMessage({source:"LOBSTR_EXTERNAL_MSG_REQUEST",messageId:o,...e},window.location.origin),new Promise((t=>{let i=0;e.type===n.REQUEST_CONNECTION_STATUS&&(i=setTimeout((()=>{t({isConnected:!1}),window.removeEventListener("message",r)}),2e3));const r=e=>{var n,s;e.source===window&&"LOBSTR_EXTERNAL_MSG_RESPONSE"===(null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.source)&&(null===(s=null==e?void 0:e.data)||void 0===s?void 0:s.messagedId)===o&&(t(e.data),window.removeEventListener("message",r),clearTimeout(i))};window.addEventListener("message",r,!1)}))},c=async()=>{if(!T)return"";const{publicKey:e,connectionKey:o}=await(async()=>{let e={publicKey:"",error:"",connectionKey:""};try{e=await s({type:n.REQUEST_ACCESS})}catch(e){console.error(e)}const{publicKey:o,connectionKey:t,error:i}=e;if(i)throw i;return{publicKey:o,connectionKey:t}})();return(e=>{var n;null===(n=null===window||void 0===window?void 0:window.sessionStorage)||void 0===n||n.setItem(r,e)})(o),e},d=async e=>{if(!T)return"";const o=(null===(t=null===window||void 0===window?void 0:window.sessionStorage)||void 0===t?void 0:t.getItem(r))||"";var t;return await(async(e,o)=>{let t={signedTransaction:"",error:""};try{t=await s({transactionXdr:e,connectionKey:o,type:n.SIGN_TRANSACTION})}catch(e){throw console.error(e),e}const{signedTransaction:i,error:r}=t;if(r)throw r;return i})(e,o)},a=async()=>!!T&&(window.lobstrSignerExtension?window.lobstrSignerExtension:await(async()=>{let e={isConnected:!1};try{e=await s({type:n.REQUEST_CONNECTION_STATUS})}catch(e){console.error(e)}return e.isConnected})()),T="undefined"!=typeof window,S={getPublicKey:c,signTransaction:d,isConnected:a};return i})()));
//# sourceMappingURL=index.min.js.map